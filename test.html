<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>

<script src="sort/common.js"></script>
<script>
// const arr = [].rnd(20)
const arr = [13, 1, 9, 9, 20, 15, 10, 0, 4, 8, 13, 16, 5, 16, 8, 15, 15, 6, 4, 18]
// const arr = [3,2,1]

function sort(arr) {
  function quickSort(l, r) {
    if (l >= r) return

    arr.swap(l, rand(l + 1, r))

    const v = arr[l]
    let lt = l
    let gt = r + 1
    let i = l + 1

    while (i < gt) {
      if (arr[i] < v) {
        arr.swap(i, lt + 1)
        lt++
        i++
      } else if (arr[i] > v) {
        arr.swap(i, gt - 1)
        gt--
      } else {
        i++
      }
    }

    arr.swap(l, lt)
    quickSort(l, lt - 1)
    quickSort(gt, r)
  }
  quickSort(0, arr.length - 1)
}

sort(arr)
console.log(arr)
</script>

</body>
</html>